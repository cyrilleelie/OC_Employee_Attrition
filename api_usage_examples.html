

<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exemples d’Utilisation de l’API de Prédiction d’Attrition RH &mdash; Documentation Attrition RH API v0.2.1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=44cc1bf8"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/translations.js?v=e6b791cb"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Guide de Contribution au Projet d’Attrition RH" href="contributing.html" />
    <link rel="prev" title="Documentation Technique du Modèle de Prédiction d’Attrition RH" href="model_documentation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Attrition RH API
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenu:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation_guide.html">Guide d’Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_documentation.html">Documentation Technique du Modèle de Prédiction d’Attrition RH</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Exemples d’Utilisation de l’API de Prédiction d’Attrition RH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#utilisation-avec-curl">1. Utilisation avec <code class="docutils literal notranslate"><span class="pre">curl</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#endpoint-racine-get">Endpoint Racine (<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#endpoint-prediction-unique-post-predict">Endpoint Prédiction Unique (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/predict</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#endpoint-prediction-en-masse-post-predict-bulk">Endpoint Prédiction en Masse (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/predict_bulk</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utilisation-avec-python-et-la-librairie-requests">2. Utilisation avec Python et la librairie <code class="docutils literal notranslate"><span class="pre">requests</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation :</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Guide de Contribution au Projet d’Attrition RH</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Attrition RH API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Exemples d’Utilisation de l’API de Prédiction d’Attrition RH</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api_usage_examples.md.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="exemples-d-utilisation-de-l-api-de-prediction-d-attrition-rh">
<h1>Exemples d’Utilisation de l’API de Prédiction d’Attrition RH<a class="headerlink" href="#exemples-d-utilisation-de-l-api-de-prediction-d-attrition-rh" title="Lien vers cette rubrique"></a></h1>
<p>Ce document fournit des exemples concrets pour interagir avec l’API de prédiction d’attrition des employés. Pour que ces exemples fonctionnent, assurez-vous que l’API est en cours d’exécution (par exemple, localement sur <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8000</span></code> ou sur son URL de déploiement sur Hugging Face Spaces).</p>
<p>La documentation interactive complète de l’API (Swagger UI), générée automatiquement par FastAPI, est toujours disponible à l’endpoint <code class="docutils literal notranslate"><span class="pre">/docs</span></code> de l’API en cours d’exécution (par exemple, <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8000/docs</span></code>).</p>
<section id="utilisation-avec-curl">
<h2>1. Utilisation avec <code class="docutils literal notranslate"><span class="pre">curl</span></code><a class="headerlink" href="#utilisation-avec-curl" title="Lien vers cette rubrique"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">curl</span></code> est un outil en ligne de commande polyvalent pour transférer des données avec des URL. Il est disponible sur la plupart des systèmes Linux et macOS, et peut être installé sur Windows.</p>
<section id="endpoint-racine-get">
<h3>Endpoint Racine (<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code>)<a class="headerlink" href="#endpoint-racine-get" title="Lien vers cette rubrique"></a></h3>
<p>Cet endpoint permet de vérifier si l’API est en ligne et d’obtenir un message de bienvenue.</p>
<p><strong>Commande :</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="s2">&quot;[http://127.0.0.1:8000/](http://127.0.0.1:8000/)&quot;</span>
</pre></div>
</div>
<p><strong>Réponse Attendue (exemple) :</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bienvenue sur l&#39;API Prédiction Attrition RH - v0.1.0. Accédez à /docs pour la documentation.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="endpoint-prediction-unique-post-predict">
<h3>Endpoint Prédiction Unique (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/predict</span></code>)<a class="headerlink" href="#endpoint-prediction-unique-post-predict" title="Lien vers cette rubrique"></a></h3>
<p>Cet endpoint permet d’obtenir une prédiction pour un seul employé. Le corps de la requête doit être un objet JSON correspondant au schéma <code class="docutils literal notranslate"><span class="pre">EmployeeInput</span></code>.</p>
<p><strong>Commande :</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;[http://127.0.0.1:8000/predict](http://127.0.0.1:8000/predict)&quot;</span><span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;age&quot;: 45,</span>
<span class="s1">  &quot;annees_dans_l_entreprise&quot;: 5,</span>
<span class="s1">  &quot;annees_depuis_la_derniere_promotion&quot;: 0,</span>
<span class="s1">  &quot;augementation_salaire_precedente&quot;: &quot;15 %&quot;,</span>
<span class="s1">  &quot;departement&quot;: &quot;Commercial&quot;,</span>
<span class="s1">  &quot;distance_domicile_travail&quot;: 20,</span>
<span class="s1">  &quot;domaine_etude&quot;: &quot;Infra &amp; Cloud&quot;,</span>
<span class="s1">  &quot;frequence_deplacement&quot;: &quot;Occasionnel&quot;,</span>
<span class="s1">  &quot;genre&quot;: &quot;M&quot;,</span>
<span class="s1">  &quot;heure_supplementaires&quot;: &quot;Oui&quot;,</span>
<span class="s1">  &quot;nb_formations_suivies&quot;: 3,</span>
<span class="s1">  &quot;niveau_education&quot;: 3,</span>
<span class="s1">  &quot;nombre_experiences_precedentes&quot;: 8,</span>
<span class="s1">  &quot;nombre_participation_pee&quot;: 0,</span>
<span class="s1">  &quot;note_evaluation_actuelle&quot;: 3,</span>
<span class="s1">  &quot;note_evaluation_precedente&quot;: 3,</span>
<span class="s1">  &quot;poste&quot;: &quot;Cadre Commercial&quot;,</span>
<span class="s1">  &quot;revenu_mensuel&quot;: 4850,</span>
<span class="s1">  &quot;satisfaction_employee_environnement&quot;: 4,</span>
<span class="s1">  &quot;satisfaction_employee_equilibre_pro_perso&quot;: 3,</span>
<span class="s1">  &quot;satisfaction_employee_equipe&quot;: 3,</span>
<span class="s1">  &quot;satisfaction_employee_nature_travail&quot;: 3,</span>
<span class="s1">  &quot;statut_marital&quot;: &quot;Célibataire&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
<p><strong>Réponse Attendue (structure) :</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id_employe&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;API_SINGLE_PREDICT&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// L&#39;ID peut varier basé sur l&#39;index interne</span>
<span class="w">  </span><span class="nt">&quot;probabilite_depart&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.123</span><span class="p">,</span><span class="w">       </span><span class="c1">// Valeur d&#39;exemple</span>
<span class="w">  </span><span class="nt">&quot;prediction_depart&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">              </span><span class="c1">// Valeur d&#39;exemple</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="endpoint-prediction-en-masse-post-predict-bulk">
<h3>Endpoint Prédiction en Masse (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/predict_bulk</span></code>)<a class="headerlink" href="#endpoint-prediction-en-masse-post-predict-bulk" title="Lien vers cette rubrique"></a></h3>
<p>Cet endpoint permet d’obtenir des prédictions pour plusieurs employés en un seul appel. Le corps de la requête est un objet JSON contenant une clé <code class="docutils literal notranslate"><span class="pre">&quot;employees&quot;</span></code> dont la valeur est une liste d’objets <code class="docutils literal notranslate"><span class="pre">EmployeeInput</span></code>.</p>
<p><strong>Commande :</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;[http://127.0.0.1:8000/predict_bulk](http://127.0.0.1:8000/predict_bulk)&quot;</span><span class="w"> </span><span class="se">\</span>
-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;employees&quot;: [</span>
<span class="s1">    {</span>
<span class="s1">        &quot;age&quot;: 45,</span>
<span class="s1">        &quot;annees_dans_l_entreprise&quot;: 5,</span>
<span class="s1">        &quot;annees_depuis_la_derniere_promotion&quot;: 0,</span>
<span class="s1">        &quot;augementation_salaire_precedente&quot;: &quot;15 %&quot;,</span>
<span class="s1">        &quot;departement&quot;: &quot;Commercial&quot;,</span>
<span class="s1">        &quot;distance_domicile_travail&quot;: 20,</span>
<span class="s1">        &quot;domaine_etude&quot;: &quot;Infra &amp; Cloud&quot;,</span>
<span class="s1">        &quot;frequence_deplacement&quot;: &quot;Occasionnel&quot;,</span>
<span class="s1">        &quot;genre&quot;: &quot;M&quot;,</span>
<span class="s1">        &quot;heure_supplementaires&quot;: &quot;Oui&quot;,</span>
<span class="s1">        &quot;nb_formations_suivies&quot;: 3,</span>
<span class="s1">        &quot;niveau_education&quot;: 3,</span>
<span class="s1">        &quot;nombre_experiences_precedentes&quot;: 8,</span>
<span class="s1">        &quot;nombre_participation_pee&quot;: 0,</span>
<span class="s1">        &quot;note_evaluation_actuelle&quot;: 3,</span>
<span class="s1">        &quot;note_evaluation_precedente&quot;: 3,</span>
<span class="s1">        &quot;poste&quot;: &quot;Cadre Commercial&quot;,</span>
<span class="s1">        &quot;revenu_mensuel&quot;: 4850,</span>
<span class="s1">        &quot;satisfaction_employee_environnement&quot;: 4,</span>
<span class="s1">        &quot;satisfaction_employee_equilibre_pro_perso&quot;: 3,</span>
<span class="s1">        &quot;satisfaction_employee_equipe&quot;: 3,</span>
<span class="s1">        &quot;satisfaction_employee_nature_travail&quot;: 3,</span>
<span class="s1">        &quot;statut_marital&quot;: &quot;Célibataire&quot;</span>
<span class="s1">    },</span>
<span class="s1">    {</span>
<span class="s1">        &quot;age&quot;: 45,</span>
<span class="s1">        &quot;annees_dans_l_entreprise&quot;: 5,</span>
<span class="s1">        &quot;annees_depuis_la_derniere_promotion&quot;: 0,</span>
<span class="s1">        &quot;augementation_salaire_precedente&quot;: &quot;15 %&quot;,</span>
<span class="s1">        &quot;departement&quot;: &quot;Commercial&quot;,</span>
<span class="s1">        &quot;distance_domicile_travail&quot;: 20,</span>
<span class="s1">        &quot;domaine_etude&quot;: &quot;Infra &amp; Cloud&quot;,</span>
<span class="s1">        &quot;frequence_deplacement&quot;: &quot;Occasionnel&quot;,</span>
<span class="s1">        &quot;genre&quot;: &quot;M&quot;,</span>
<span class="s1">        &quot;heure_supplementaires&quot;: &quot;Oui&quot;,</span>
<span class="s1">        &quot;nb_formations_suivies&quot;: 3,</span>
<span class="s1">        &quot;niveau_education&quot;: 3,</span>
<span class="s1">        &quot;nombre_experiences_precedentes&quot;: 8,</span>
<span class="s1">        &quot;nombre_participation_pee&quot;: 0,</span>
<span class="s1">        &quot;note_evaluation_actuelle&quot;: 3,</span>
<span class="s1">        &quot;note_evaluation_precedente&quot;: 3,</span>
<span class="s1">        &quot;poste&quot;: &quot;Cadre Commercial&quot;,</span>
<span class="s1">        &quot;revenu_mensuel&quot;: 4850,</span>
<span class="s1">        &quot;satisfaction_employee_environnement&quot;: 4,</span>
<span class="s1">        &quot;satisfaction_employee_equilibre_pro_perso&quot;: 3,</span>
<span class="s1">        &quot;satisfaction_employee_equipe&quot;: 3,</span>
<span class="s1">        &quot;satisfaction_employee_nature_travail&quot;: 3,</span>
<span class="s1">        &quot;statut_marital&quot;: &quot;Célibataire&quot;</span>
<span class="s1">    }</span>
<span class="s1">  ]</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
<p><strong>Réponse Attendue (structure) :</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;predictions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id_employe&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BULK_0&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;probabilite_depart&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.123</span><span class="p">,</span><span class="w"> </span><span class="c1">// Valeur d&#39;exemple</span>
<span class="w">      </span><span class="nt">&quot;prediction_depart&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="c1">// Valeur d&#39;exemple</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id_employe&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BULK_1&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;probabilite_depart&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.789</span><span class="p">,</span><span class="w"> </span><span class="c1">// Valeur d&#39;exemple</span>
<span class="w">      </span><span class="nt">&quot;prediction_depart&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">       </span><span class="c1">// Valeur d&#39;exemple</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="utilisation-avec-python-et-la-librairie-requests">
<h2>2. Utilisation avec Python et la librairie <code class="docutils literal notranslate"><span class="pre">requests</span></code><a class="headerlink" href="#utilisation-avec-python-et-la-librairie-requests" title="Lien vers cette rubrique"></a></h2>
<p>La librairie <code class="docutils literal notranslate"><span class="pre">requests</span></code> est la manière standard et conviviale d’interagir avec des API HTTP en Python.</p>
<section id="installation">
<h3>Installation :<a class="headerlink" href="#installation" title="Lien vers cette rubrique"></a></h3>
<p>Si vous ne l’avez pas dans votre environnement, vous pouvez l’installer avec pip :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>requests
</pre></div>
</div>
<p>Si vous utilisez Poetry pour un projet client séparé, ajoutez-la avec <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">requests</span></code>.</p>
<p><strong>Script Python d’Exemple :</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span> <span class="c1"># Utilisé pour un affichage formaté de la réponse ou pour le débogage</span>

<span class="c1"># URL de base de votre API (adaptez si déployée ailleurs)</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s2">&quot;[http://127.0.0.1:8000](http://127.0.0.1:8000)&quot;</span>

<span class="c1"># Données d&#39;exemple pour un employé (doit correspondre au schéma EmployeeInput)</span>
<span class="c1"># Assurez-vous que toutes les colonnes requises par votre schéma Pydantic sont présentes.</span>
<span class="n">employee_data_1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span>
    <span class="s2">&quot;annees_dans_l_entreprise&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;annees_depuis_la_derniere_promotion&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;augementation_salaire_precedente&quot;</span><span class="p">:</span> <span class="s2">&quot;15 %&quot;</span><span class="p">,</span>
    <span class="s2">&quot;departement&quot;</span><span class="p">:</span> <span class="s2">&quot;Commercial&quot;</span><span class="p">,</span>
    <span class="s2">&quot;distance_domicile_travail&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;domaine_etude&quot;</span><span class="p">:</span> <span class="s2">&quot;Infra &amp; Cloud&quot;</span><span class="p">,</span>
    <span class="s2">&quot;frequence_deplacement&quot;</span><span class="p">:</span> <span class="s2">&quot;Occasionnel&quot;</span><span class="p">,</span>
    <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span>
    <span class="s2">&quot;heure_supplementaires&quot;</span><span class="p">:</span> <span class="s2">&quot;Oui&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nb_formations_suivies&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;niveau_education&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;nombre_experiences_precedentes&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s2">&quot;nombre_participation_pee&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;note_evaluation_actuelle&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;note_evaluation_precedente&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;poste&quot;</span><span class="p">:</span> <span class="s2">&quot;Cadre Commercial&quot;</span><span class="p">,</span>
    <span class="s2">&quot;revenu_mensuel&quot;</span><span class="p">:</span> <span class="mi">4850</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_environnement&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_equilibre_pro_perso&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_equipe&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_nature_travail&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;statut_marital&quot;</span><span class="p">:</span> <span class="s2">&quot;Célibataire&quot;</span>
    <span class="p">}</span>

<span class="n">employee_data_2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span>
    <span class="s2">&quot;annees_dans_l_entreprise&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;annees_depuis_la_derniere_promotion&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;augementation_salaire_precedente&quot;</span><span class="p">:</span> <span class="s2">&quot;15 %&quot;</span><span class="p">,</span>
    <span class="s2">&quot;departement&quot;</span><span class="p">:</span> <span class="s2">&quot;Commercial&quot;</span><span class="p">,</span>
    <span class="s2">&quot;distance_domicile_travail&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;domaine_etude&quot;</span><span class="p">:</span> <span class="s2">&quot;Infra &amp; Cloud&quot;</span><span class="p">,</span>
    <span class="s2">&quot;frequence_deplacement&quot;</span><span class="p">:</span> <span class="s2">&quot;Occasionnel&quot;</span><span class="p">,</span>
    <span class="s2">&quot;genre&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span>
    <span class="s2">&quot;heure_supplementaires&quot;</span><span class="p">:</span> <span class="s2">&quot;Oui&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nb_formations_suivies&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;niveau_education&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;nombre_experiences_precedentes&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s2">&quot;nombre_participation_pee&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;note_evaluation_actuelle&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;note_evaluation_precedente&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;poste&quot;</span><span class="p">:</span> <span class="s2">&quot;Cadre Commercial&quot;</span><span class="p">,</span>
    <span class="s2">&quot;revenu_mensuel&quot;</span><span class="p">:</span> <span class="mi">4850</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_environnement&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_equilibre_pro_perso&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_equipe&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;satisfaction_employee_nature_travail&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;statut_marital&quot;</span><span class="p">:</span> <span class="s2">&quot;Célibataire&quot;</span>
    <span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_api_endpoints</span><span class="p">():</span>
    <span class="c1"># 1. Tester l&#39;endpoint racine</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response_root</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">)</span>
        <span class="n">response_root</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># Lève une exception pour les codes d&#39;erreur HTTP (4xx ou 5xx)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Réponse de GET /:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_root</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erreur lors de l&#39;appel à GET /: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># 2. Tester l&#39;endpoint /predict</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test de POST /predict...&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response_predict</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">/predict&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">employee_data_1</span><span class="p">)</span>
        <span class="n">response_predict</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Réponse de POST /predict:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_predict</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erreur lors de l&#39;appel à POST /predict: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Détail de l&#39;erreur du serveur: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Détail de l&#39;erreur du serveur (non-JSON): </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># 3. Tester l&#39;endpoint /predict_bulk</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test de POST /predict_bulk...&quot;</span><span class="p">)</span>
    <span class="n">bulk_payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;employees&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">employee_data_1</span><span class="p">,</span> <span class="n">employee_data_2</span><span class="p">]}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response_bulk</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">/predict_bulk&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">bulk_payload</span><span class="p">)</span>
        <span class="n">response_bulk</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Réponse de POST /predict_bulk:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_bulk</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erreur lors de l&#39;appel à POST /predict_bulk: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Détail de l&#39;erreur du serveur: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Détail de l&#39;erreur du serveur (non-JSON): </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">test_api_endpoints</span><span class="p">()</span>
</pre></div>
</div>
<p>N’oubliez pas que les valeurs (<code class="docutils literal notranslate"><span class="pre">age</span></code>, <code class="docutils literal notranslate"><span class="pre">revenu_mensuel</span></code>, etc.) dans les exemples <code class="docutils literal notranslate"><span class="pre">curl</span></code> et Python sont des placeholders. Vous devrez les remplacer par des données qui ont du sens pour votre modèle et qui respectent les types définis dans votre schéma Pydantic <code class="docutils literal notranslate"><span class="pre">EmployeeInput</span></code>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="model_documentation.html" class="btn btn-neutral float-left" title="Documentation Technique du Modèle de Prédiction d’Attrition RH" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="contributing.html" class="btn btn-neutral float-right" title="Guide de Contribution au Projet d’Attrition RH" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2025, Cyrille ELIE.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>